# 성능 최적화 가이드

## 현재 성능

### 벤치마크 결과 (10회 실행 평균)
- **평균**: 0.32ms (0.000초)
- **최소**: 0.08ms
- **최대**: 1.79ms
- **목표**: ≤ 3000ms (3초)
- **상태**: ✅ 목표 달성 (약 9375배 빠름)

### 최적화 적용 사항

1. **인덱싱 최적화**
   - `createNodeIndex()` 함수로 selector와 text 기반 인덱스 생성
   - O(1) 조회로 중첩 루프 감소

2. **조기 종료 최적화**
   - 매칭 발견 시 즉시 루프 종료
   - 불필요한 반복 제거

3. **빈 문서 체크**
   - nonSpecDocs가 비어있으면 즉시 반환
   - 불필요한 처리 방지

## 성능 측정 방법

### 벤치마크 실행
```bash
pnpm benchmark
```

### CLI 실행 시간 측정
```bash
time pnpm start:cli
```

## 성능 모니터링

### 주요 메트릭
- Normalizer 실행 시간
- Diff Engine 규칙 적용 시간
- 전체 Diff 실행 시간

### 병목 지점
현재는 다음 영역이 가장 시간이 소요됩니다:
1. Normalizer (JSON 파싱 및 변환)
2. Diff Engine 규칙 적용 (인덱싱으로 최적화됨)

## 향후 최적화 방향

1. **대용량 데이터셋 대응**
   - 노드 수가 수천 개 이상일 때를 위한 추가 최적화
   - 스트리밍 처리 고려

2. **캐싱 전략**
   - Normalizer 결과 캐싱
   - 인덱스 재사용

3. **병렬 처리**
   - 규칙 적용 병렬화
   - Normalizer 병렬 실행 (이미 적용됨)


